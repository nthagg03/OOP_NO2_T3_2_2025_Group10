<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
<head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Coffee Shop - Danh m·ª•c s·∫£n ph·∫©m</title>
        <style>
                :root{
                        --text: #2b2b2b;
                        --muted: #6b6b6b;
                        --brand: #111; /* top bar like screenshot */
                        --badge: #e53935; /* red NEW badge */
                        --chip: #c6a58f; /* beige button */
                        --card: #ffffff;
                        --shadow: 0 4px 18px rgba(0,0,0,.08);
                }
                *{box-sizing:border-box}
                body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;color:var(--text);background:#fff}
                /* top nav mimic */
                .topbar{background:#0e0e0e;color:#fff}
                .topbar .wrap{max-width:1200px;margin:0 auto;padding:14px 20px;display:flex;gap:22px;align-items:center}
                .topbar .brand{font-weight:700;letter-spacing:.5px;margin-right:auto}
                .topbar nav a{color:#fff;text-decoration:none;margin:0 8px;font-size:14px;opacity:.92}
                .topbar nav a:hover{opacity:1}

                main{max-width:1200px;margin:24px auto;padding:0 20px}
                h2{margin:18px 0 12px 0;font-size:22px}

                .grid{display:grid;grid-template-columns:repeat(3,1fr);gap:22px}
                @media (max-width: 980px){.grid{grid-template-columns:repeat(2,1fr)}}
                @media (max-width: 640px){.grid{grid-template-columns:1fr}}

                .card{background:var(--card);border:1px solid #eee;border-radius:6px;box-shadow:var(--shadow);overflow:hidden}
                .thumb{position:relative;aspect-ratio:4/3;background:linear-gradient(135deg,#ddd,#f4f4f4);display:grid;place-items:center}
                .thumb img{width:100%;height:100%;object-fit:cover;display:block}
                .badge{position:absolute;top:10px;left:10px;background:var(--badge);color:#fff;font-size:12px;padding:6px 8px;border-radius:3px;font-weight:700}
                .badge.size{background:#d32f2f}
                .content{padding:12px 14px}
                .title{font-weight:600;margin:0 0 6px 0}
                .desc{color:var(--muted);font-size:13px;line-height:1.5;max-height:3em;overflow:hidden}
                .meta{display:flex;align-items:center;justify-content:space-between;margin-top:10px}
                .price{font-weight:700}
                .btn{display:inline-block;background:var(--chip);color:#fff;text-decoration:none;padding:8px 14px;border-radius:3px;font-size:13px}

                .section{margin-bottom:30px}
                .section .header{display:flex;align-items:center;justify-content:space-between;margin-bottom:12px}
                .section .header .more{background:#e9dfd8;color:#6b4e3d;border:0;padding:8px 12px;border-radius:3px;cursor:pointer}

                /* show more */
                .more-wrap{display:grid;place-items:center;margin-top:14px}
                .btn-more{background:#e9dfd8;color:#6b4e3d;border:0;padding:10px 16px;border-radius:3px;cursor:pointer}
                .hidden{display:none!important}
        </style>
</head>
<body>
<header class="topbar">
    <div class="wrap">
        <div class="brand">Ph√™-La</div>
        <nav>
            <a href="#">S·∫£n ph·∫©m</a>
            <a href="#">C√¢u chuy·ªán th∆∞∆°ng hi·ªáu</a>
            <a href="#">Tin t·ª©c</a>
            <a href="#">C·ª≠a h√†ng</a>
            <a href="#">Th√†nh vi√™n</a>
            <a href="#">Li√™n h·ªá</a>
            <a href="#">Chuy·ªán ƒë·∫∑c s·∫£n</a>
        </nav>
    </div>
</header>

<main>
    <!-- FEATURED PRODUCTS -->
    <section class="section" aria-label="S·∫£n ph·∫©m n·ªïi b·∫≠t">
        <div class="header">
            <h2>S·∫£n ph·∫©m n·ªïi b·∫≠t</h2>
            <button class="more hidden" id="moreFeatured">Xem th√™m</button>
        </div>
        <div class="grid" id="featuredGrid">
            <article class="card" th:each="p, st : ${products}" th:if="${p.featured} == true and ${st.count} &lt;= 6">
                <div class="thumb">
                    <span class="badge" th:if="${p.isNew}">M·ªöI</span>
                    <span class="badge size" th:if="${p.size} == 'L'">SIZE L</span>
                    <img th:if="${p.imageUrl} != null" th:src="${p.imageUrl}" alt="·∫¢nh s·∫£n ph·∫©m" />
                    <div th:if="${p.imageUrl} == null" style="font-size:42px">ü•§</div>
                </div>
                <div class="content">
                    <h3 class="title" th:text="${p.productName}">T√™n s·∫£n ph·∫©m</h3>
                    <p class="desc" th:text="${p.description}">M√¥ t·∫£ ng·∫Øn g·ªçn v·ªÅ s·∫£n ph·∫©m...</p>
                    <div class="meta">
                        <div class="price" th:text="${#numbers.formatDecimal(p.price, 0, 'COMMA', 0, 'POINT')} + ' ‚Ç´'">0 ‚Ç´</div>
                        <a class="btn" th:href="@{'/products/' + ${p.productId}}">Chi ti·∫øt</a>
                    </div>
                </div>
            </article>
        </div>
    </section>

    <!-- ALL PRODUCTS -->
    <section class="section" aria-label="T·∫•t c·∫£ s·∫£n ph·∫©m">
        <div class="header">
            <h2>T·∫•t c·∫£ s·∫£n ph·∫©m</h2>
        </div>
        <div class="grid" id="allProductsGrid">
            <article class="card" th:each="p, st : ${products}" th:classappend="${st.count} > 9 ? ' extra hidden' : ''">
                <div class="thumb">
                    <span class="badge" th:if="${p.isNew}">M·ªöI</span>
                    <span class="badge size" th:if="${p.size} == 'L'">SIZE L</span>
                    <img th:if="${p.imageUrl} != null" th:src="${p.imageUrl}" alt="·∫¢nh s·∫£n ph·∫©m" />
                    <div th:if="${p.imageUrl} == null" style="font-size:42px">ü•§</div>
                </div>
                <div class="content">
                    <h3 class="title" th:text="${p.productName}">T√™n s·∫£n ph·∫©m</h3>
                    <p class="desc" th:text="${p.description}">M√¥ t·∫£ ng·∫Øn g·ªçn v·ªÅ s·∫£n ph·∫©m...</p>
                    <div class="meta">
                        <div class="price" th:text="${#numbers.formatDecimal(p.price, 0, 'COMMA', 0, 'POINT')} + ' ‚Ç´'">0 ‚Ç´</div>
                        <a class="btn" th:href="@{'/products/' + ${p.productId}}">Chi ti·∫øt</a>
                    </div>
                </div>
            </article>
        </div>
        <div class="more-wrap">
            <button class="btn-more" id="showMore">Xem th√™m</button>
        </div>
    </section>

    <!-- ADMIN QUICK ACTION (optional) -->
    <div style="margin:16px 0">
        <a class="btn" style="background:#333" th:href="@{/products/new}">+ Th√™m s·∫£n ph·∫©m</a>
    </div>
</main>

<script>
    // Simple "show more" behavior for All Products grid
    (function(){
        const btn = document.getElementById('showMore');
        const grid = document.getElementById('allProductsGrid');
        if(!btn || !grid) return;
        btn.addEventListener('click', function(){
            grid.querySelectorAll('.extra.hidden').forEach(el=>el.classList.remove('hidden'));
            btn.classList.add('hidden');
        });
    })();
</script>
</body>
</html>
