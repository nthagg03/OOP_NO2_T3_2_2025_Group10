<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Coffee Shop - Thêm người dùng</title>
		<style>
			:root{--coffee-900:#3e2723;--coffee-700:#5d4037;--accent:#c59d5f;--cream:#fff8e1}
			*{box-sizing:border-box} body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;color:var(--coffee-900);background:linear-gradient(180deg,#efebe9,#fff 30%)}
			header{display:flex;align-items:center;gap:10px;padding:16px 20px;background:linear-gradient(135deg,#5d4037,#3e2723);color:#fff}
			header .logo{width:36px;height:36px;display:grid;place-items:center;background:rgba(255,255,255,.12);border:1px solid rgba(255,255,255,.2);border-radius:8px}
			main{max-width:860px;margin:20px auto;padding:0 16px}
			.card{background:#fff;border:1px solid rgba(0,0,0,.06);border-radius:16px;box-shadow:0 8px 22px rgba(62,39,35,.10);overflow:hidden}
			.content{padding:22px}
			.grid{display:grid;gap:14px}
			.row{display:flex;gap:12px}
			.field{flex:1;display:grid;gap:6px}
			.label{font-size:14px;color:#5c4742}
			.input,.select{border:1px solid #d4cfcf;border-radius:12px;overflow:hidden;background:#fff}
			input,select{border:0;outline:none;padding:12px 14px;font-size:15px;width:100%;background:transparent}
			.actions{display:flex;gap:10px;margin-top:10px}
			.btn{border:0;border-radius:10px;padding:10px 14px;font-weight:600;cursor:pointer}
			.btn.primary{background:var(--accent);color:#1d140f}
			.btn.secondary{background:#fff;color:var(--coffee-900);border:1px solid #d4cfcf}
			a.link{color:#5d4037;text-decoration:none}
		</style>
	</head>
	<body>
		<header><div class="logo">☕</div> <div>Thêm người dùng</div></header>
		<main>
			<div class="card">
				<div class="content">
					<form id="addUserForm" action="#" method="post" class="grid">
						<div class="row">
							<div class="field">
								<label class="label" for="fullName">Họ và tên</label>
								<div class="input"><input id="name" name="name" type="text" required /></div>
							</div>
							<div class="field">
								<label class="label" for="username">Username</label>
								<div class="input"><input id="userId" name="userId" type="text" placeholder="(tùy chọn)" /></div>
							</div>
						</div>

						<div class="row">
							<div class="field">
								<label class="label" for="email">Email</label>
								<div class="input"><input id="email" name="email" type="email" required /></div>
							</div>
							<div class="field">
								<label class="label" for="role">Vai trò</label>
								<div class="select">
									<select id="userType" name="userType">
										<option th:value="${T(com.example.servingwebcontent.Model.User.UserType).Customer?string('Customer')}">Customer</option>
										<option th:value="${T(com.example.servingwebcontent.Model.User.UserType).Seller?string('Seller')}">Seller</option>
									</select>
								</div>
							</div>
						</div>

						<div class="row">
							<div class="field">
								<label class="label" for="password">Mật khẩu</label>
								<div class="input"><input id="password" name="password" type="password" required /></div>
							</div>
							<div class="field">
								<label class="label" for="phone">SĐT</label>
								<div class="input"><input id="phoneNumber" name="phoneNumber" type="tel" /></div>
							</div>
						</div>

						<div class="row">
							<div class="field">
								<label class="label" for="address">Địa chỉ</label>
								<div class="input"><input id="address" name="address" type="text" /></div>
							</div>
							<div class="field">
								<label class="label" for="birthDate">Ngày sinh</label>
								<div class="input"><input id="birthDate" name="birthDate" type="date" /></div>
							</div>
						</div>

						<div class="actions">
							<button class="btn primary" type="submit">Lưu</button>
							<a class="btn secondary" href="userlist.html">Hủy</a>
						</div>
						</form>
						<script>
							(function(){
								const form = document.getElementById('addUserForm');
								function genId(){ return 'u_' + Date.now(); }
								form.addEventListener('submit', function(ev){
									ev.preventDefault();
									const u = {
										id: genId(),
										name: (form.name.value||'').trim(),
										username: (form.userId && form.userId.value) ? form.userId.value.trim() : '',
										email: (form.email.value||'').trim(),
										userType: (form.userType && form.userType.value) ? form.userType.value : 'Customer',
										phoneNumber: (form.phoneNumber.value||'').trim()
									};
									if(!u.name || !u.email){ alert('Tên và email là bắt buộc'); return; }
									try{
										const raw = localStorage.getItem('users');
										const users = raw ? JSON.parse(raw) : [];
										users.push(u);
										localStorage.setItem('users', JSON.stringify(users));
										window.location.href = 'userlist.html';
									}catch(e){ console.error(e); alert('Lỗi lưu người dùng'); }
								});
							})();
						</script>
				</div>
			</div>
		</main>
	</body>
	</html>

