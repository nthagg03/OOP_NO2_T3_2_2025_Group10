<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Coffee Shop - Danh mục sản phẩm</title>
    <style>
        :root{--coffee-900:#3e2723;--coffee-700:#5d4037;--accent:#c59d5f;--cream:#fff8e1;--muted:#6b6b6b}
        *{box-sizing:border-box}
        body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;color:var(--coffee-900);background:linear-gradient(180deg,#efebe9,#fff 30%)}
        header{display:flex;align-items:center;gap:12px;padding:14px 20px;background:linear-gradient(135deg,var(--coffee-700),var(--coffee-900));color:#fff}
        .logo{width:40px;height:40px;display:grid;place-items:center;background:rgba(255,255,255,.08);border:1px solid rgba(255,255,255,.12);border-radius:8px;font-size:20px}
        header .title{font-weight:700}

        main{max-width:1100px;margin:22px auto;padding:0 18px}
        h2{margin:8px 0 12px 0;font-size:20px}

        .grid{display:grid;grid-template-columns:repeat(3,1fr);gap:18px}
        @media (max-width:980px){.grid{grid-template-columns:repeat(2,1fr)}}
        @media (max-width:640px){.grid{grid-template-columns:1fr}}

        .card{background:#fff;border:1px solid rgba(0,0,0,.06);border-radius:12px;overflow:hidden;box-shadow:0 8px 22px rgba(62,39,35,.06)}
        .thumb{position:relative;aspect-ratio:4/3;background:linear-gradient(135deg,#f4f0ec,#fff);display:grid;place-items:center}
        .thumb img{width:100%;height:100%;object-fit:cover;display:block}
        .badge{position:absolute;top:10px;left:10px;background:#e53935;color:#fff;font-size:12px;padding:6px 8px;border-radius:6px;font-weight:700}
        .badge.size{left:auto;right:10px;background:#7a2b2b}

        .content{padding:12px 14px}
        .title-card{font-weight:700;margin:0 0 6px 0;color:var(--coffee-900)}
        .desc{color:var(--muted);font-size:13px;line-height:1.4;max-height:3.2em;overflow:hidden}
        .meta{display:flex;align-items:center;justify-content:space-between;margin-top:12px}
        .price{font-weight:800;color:var(--coffee-900)}

        .section{margin-bottom:26px}
        .section .header{display:flex;align-items:center;justify-content:space-between;margin-bottom:12px}
        .btn{border:0;border-radius:10px;padding:8px 12px;font-weight:700;cursor:pointer}
        .btn.primary{background:var(--accent);color:#1d140f}
        .btn.secondary{background:#fff;color:var(--coffee-900);border:1px solid rgba(0,0,0,.06)}
        .btn.ghost{background:transparent;color:#fff;border:1px solid rgba(255,255,255,.08)}

        .more-wrap{display:grid;place-items:center;margin-top:14px}
        .btn-more{background:var(--cream);color:var(--coffee-700);border:0;padding:10px 16px;border-radius:8px;cursor:pointer;font-weight:700}
        .hidden{display:none!important}
    </style>
</head>
<body>
<header>
    <div class="logo">☕</div>
    <div class="title">Danh mục sản phẩm</div>
    <div style="margin-left:auto">
        <a class="btn ghost" th:href="@{/}">Trang chủ</a>
        <a class="btn secondary" th:href="@{/products/new}" style="margin-left:8px">+ Thêm</a>
    </div>
</header>

<main>
    <!-- Featured -->
    <section class="section" aria-label="Sản phẩm nổi bật">
        <div class="header">
            <h2>Sản phẩm nổi bật</h2>
            <div></div>
        </div>
        <div class="grid" id="featuredGrid">
            <article class="card" th:each="p, st : ${products}" th:if="${st.index} &lt; 4">
                <div class="thumb">
                    <img th:if="${p.productId} != null" th:src="@{/images/default-product.jpg}" alt="ảnh sản phẩm" />
                    <div th:if="${p.productId} == null" style="font-size:42px">☕</div>
                </div>
                <div class="content">
                    <h3 class="title-card" th:text="${p.productName}">Tên sản phẩm</h3>
                    <p class="desc" th:text="${p.description}">Mô tả ngắn gọn về sản phẩm...</p>
                    <div class="meta">
                        <div class="price" th:text="${#numbers.formatDecimal(p.price, 0, 'COMMA', 0, 'POINT')} + ' ₫'">0 ₫</div>
                        <a class="btn primary" th:href="@{'/products/edit/' + ${p.productId}}">Sửa</a>
                        <a class="btn secondary" th:href="@{'/products/delete/' + ${p.productId}}" onclick="return confirm('Xóa sản phẩm này?')" style="margin-left:8px">Xóa</a>
                    </div>
                </div>
            </article>
        </div>
    </section>

    <!-- All products -->
    <section class="section" aria-label="Tất cả sản phẩm">
        <div class="header">
            <h2>Tất cả sản phẩm</h2>
            <div></div>
        </div>
        <div class="grid" id="allProductsGrid">
            <article class="card" th:each="p, st : ${products}" th:classappend="${st.count} > 9 ? ' extra hidden' : ''">
                <div class="thumb">
                    <img th:if="${p.productId} != null" th:src="@{/images/default-product.jpg}" alt="ảnh sản phẩm" />
                    <div th:if="${p.productId} == null" style="font-size:42px">☕</div>
                </div>
                <div class="content">
                    <h3 class="title-card" th:text="${p.productName}">Tên sản phẩm</h3>
                    <p class="desc" th:text="${p.description}">Mô tả ngắn gọn về sản phẩm...</p>
                    <div class="meta">
                        <div class="price" th:text="${#numbers.formatDecimal(p.price, 0, 'COMMA', 0, 'POINT')} + ' ₫'">0 ₫</div>
                        <a class="btn primary" th:href="@{'/products/edit/' + ${p.productId}}">Sửa</a>
                        <a class="btn secondary" th:href="@{'/products/delete/' + ${p.productId}}" onclick="return confirm('Xóa sản phẩm này?')" style="margin-left:8px">Xóa</a>
                    </div>
                </div>
            </article>
        </div>
        <div class="more-wrap">
            <button class="btn-more" id="showMore">Xem thêm</button>
        </div>
    </section>
</main>

<script>
    (function(){
        const btn = document.getElementById('showMore');
        const grid = document.getElementById('allProductsGrid');
        if(!btn || !grid) return;
        btn.addEventListener('click', function(){
            grid.querySelectorAll('.extra.hidden').forEach(el=>el.classList.remove('hidden'));
            btn.classList.add('hidden');
        });
    })();
</script>
</body>
</html>
